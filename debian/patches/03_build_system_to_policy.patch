Description: Make upstream buildsystem smarter with Debian policy.
 Make the Makefile behave on a smarter way within Debian policy requirements (4.9.1).
 * Don't strip the binary here (done by dh_strip)
 * s/CCFLAGS/CFLAGS/g : Let dpkg-buildpackage define CFLAGS.
Origin: other
Author: Didier Raboud <didier@raboud.com>
Last-Update: 2010-01-12

Index: usb-modeswitch.git/Makefile
===================================================================
--- usb-modeswitch.git.orig/Makefile	2010-01-12 11:19:32.000000000 +0100
+++ usb-modeswitch.git/Makefile	2010-01-12 11:33:32.000000000 +0100
@@ -2,7 +2,7 @@
 VERS        = 1.0.7
 STRIP	    = strip
 CC          = gcc
-CCFLAGS     = -l usb -Wall
+CFLAGS     += -l usb -Wall
 RM          = /bin/rm -f
 OBJS        = usb_modeswitch.c
 PREFIX	    = $(DESTDIR)/usr
@@ -12,8 +12,7 @@
 .PHONY:     clean
 all:        $(PROG)
 $(PROG):    $(OBJS)
-	      $(CC) $(CCFLAGS) -o $(PROG) $(OBJS)
-	      $(STRIP) $(PROG)
+	      $(CC) $(CFLAGS) -o $(PROG) $(OBJS)
 
 clean:
 	      $(RM) ./usb_modeswitch
Index: usb-modeswitch.git/Makefile.integrated
===================================================================
--- usb-modeswitch.git.orig/Makefile.integrated	2010-01-12 11:19:32.000000000 +0100
+++ usb-modeswitch.git/Makefile.integrated	2010-01-12 11:35:32.000000000 +0100
@@ -2,20 +2,19 @@
 VERS        = 1.0.7
 STRIP       = strip
 CC          = gcc
-CCFLAGS     = -Wall -l usb -DUSE_SYSLOG
+CFLAGS     += -Wall -l usb -DUSE_SYSLOG
 RM          = /bin/rm -f
 OBJS        = usb_modeswitch.c
 PREFIX      = $(DESTDIR)/usr
 ETCDIR      = $(DESTDIR)/etc
-RULESDIR    = $(DESTDIR)/etc/udev/rules.d
+RULESDIR    = $(DESTDIR)/lib/udev/rules.d
 SBINDIR     = $(PREFIX)/sbin
 
 .PHONY:     clean
 all:        clean $(PROG)
 
 $(PROG): $(OBJS)
-	$(CC) $(CCFLAGS) -o $(PROG) $(OBJS)
-	$(STRIP) $(PROG)
+	$(CC) $(CFLAGS) -o $(PROG) $(OBJS)
 
 clean:
 	$(RM) ./usb_modeswitch
